# Modix rulesets for php-cs-fixer

## Installation

Install the rulesets with composer

`composer require modix/php-cs-rulesets --dev`

### Setting up PHPStorm or WebStorm

See [Confluence](https://jira.modix.de/display/GPD/PHP-CS-Fixer)

### GrumPHP (optional)

If you want to use GrumPHP, you should use git on the terminal because there is no clean PHPStorm integration. In fact it works in the IDE but grump's output is not very readable in the UI.

1. Generate thedefault .php_cs and grumphp.yml configuration files (do this before installing phpro/grumphp-shim).

`COMPOSER=vendor/modix/php-cs-rulesets/composer.json composer modix-cs-configs`

2. Install GrumPHP. It will automatically use the configurations generated by the previous command and register the pre-commit hook, that rejects all commits with files that not pass the codestyles.

`composer require phpro/grumphp-shim --dev` to

## Configuration

you may modify the generated `.php_cs` file in your project root and configure different paths for the Finder and/or change the ruleset if required.

```php
<?php

require __DIR__.'/vendor/autoload.php';
$modixSet = new \Modix\PhpCsRulesets\RuleSet\Sets\ModixSet();

$finder = PhpCsFixer\Finder::create()
    ->in(__DIR__.'/src')
    ->in(__DIR__.'/tests')
;

$config = new PhpCsFixer\Config();
$config
    ->setRiskyAllowed(false)
    ->setRules($modixSet->getRules())
    ->setFinder($finder)
;

return $config;
```
